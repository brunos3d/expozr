# 🚀 Expozr

**Universal plugin ecosystem for web bundler module federation**

Expozr enables any web bundler to expose and consume modules at runtime, creating a truly decentralized application architecture that's simpler and more flexible than traditional module federation solutions.

## 🎯 Core Concepts

### 🏪 **Warehouse** (Remote Application)

The application that **exposes** modules. Think of it as a supplier in the ecosystem.

- Contains the actual implementation of shared components/utilities
- Generates an **Inventory** (exposure map)
- Can be deployed independently

### 🏠 **Host** (Consumer Application)

The application that **consumes** exposed modules from warehouses.

- Loads modules from Warehouses at runtime
- Uses a **Catalog** to discover available modules
- Handles dependency resolution automatically

### 📦 **Cargo** (Exposed Module)

Individual module/component being shared.

- Can be a React component, utility function, entire library, etc.
- Has metadata: name, version, dependencies, entry point
- Loaded dynamically at runtime

### 📋 **Inventory** (Exposure Map)

JSON manifest generated by Warehouses that lists all available Cargo with metadata.

### 🧭 **Navigator** (Runtime Loader)

Universal runtime system that handles dynamic loading, dependency resolution, and caching.

## ✨ Key Features

- 🌍 **Universal**: Works with any bundler (Webpack, Vite, Rollup, Rspack, etc.)
- 🚀 **Runtime Loading**: Dynamic module loading without build-time coupling
- 🔄 **Version Management**: Semantic versioning support with automatic resolution
- 🏗️ **Dependency Resolution**: Smart dependency handling and conflict resolution
- 💾 **Intelligent Caching**: Multiple caching strategies (memory, localStorage, IndexedDB)
- 🛡️ **Type Safety**: Full TypeScript support with type-safe module loading
- 📱 **Cross-Platform**: Works in both Browser and Node.js environments
- 🔧 **Great DX**: Simple APIs, CLI tools, and comprehensive documentation

## 🚀 Quick Start

### 1. Create a Warehouse (Expose Modules)

```bash
npx @expozr/cli init warehouse my-components
cd my-components
npm install
```

**expozr.config.ts:**

```typescript
import { defineWarehouseConfig } from "@expozr/core";

export default defineWarehouseConfig({
  name: "my-components",
  version: "1.0.0",
  expose: {
    "./Button": "./src/components/Button.tsx",
    "./Card": "./src/components/Card.tsx",
    "./utils": "./src/utils/index.ts",
  },
});
```

**webpack.config.js:**

```javascript
const { createWarehousePlugin } = require("@expozr/webpack-adapter");

module.exports = {
  plugins: [createWarehousePlugin()],
};
```

### 2. Create a Host (Consume Modules)

```bash
npx @expozr/cli init host my-app
cd my-app
npm install
```

**expozr.host.config.ts:**

```typescript
import { defineHostConfig } from "@expozr/core";

export default defineHostConfig({
  warehouses: {
    components: {
      url: "https://cdn.example.com/my-components",
      version: "^1.0.0",
    },
  },
});
```

**app.ts:**

```typescript
import { Navigator } from "@expozr/navigator";

const navigator = new Navigator();

// Load components at runtime
const Button = await navigator.loadCargo("components", "Button");
const Card = await navigator.loadCargo("components", "Card");

// Use them in your app
const button = Button.module({ text: "Click me!" });
```

## 📦 Packages

### Core Packages

- **[@expozr/core](./packages/core)** - Core abstractions and types
- **[@expozr/navigator](./packages/navigator)** - Runtime loader for Browser & Node.js

### Bundler Adapters

- **[@expozr/webpack-adapter](./packages/adapters/webpack)** - Webpack 5+ support
- **[@expozr/vite-adapter](./packages/adapters/vite)** - Vite support _(coming soon)_
- **[@expozr/rollup-adapter](./packages/adapters/rollup)** - Rollup support _(coming soon)_
- **[@expozr/rspack-adapter](./packages/adapters/rspack)** - Rspack support _(coming soon)_

### Developer Tools

- **[@expozr/cli](./packages/cli)** - Command line tools

## 🛠️ Bundler Support

| Bundler    | Status         | Package                 |
| ---------- | -------------- | ----------------------- |
| Webpack 5+ | ✅ Ready       | @expozr/webpack-adapter |
| Vite       | 🚧 In Progress | @expozr/vite-adapter    |
| Rollup     | 📋 Planned     | @expozr/rollup-adapter  |
| Rspack     | 📋 Planned     | @expozr/rspack-adapter  |
| Parcel     | 📋 Planned     | @expozr/parcel-adapter  |

## 🔧 Configuration

### Warehouse Configuration

```typescript
export default defineWarehouseConfig({
  name: "my-warehouse",
  version: "1.0.0",
  expose: {
    "./Button": {
      entry: "./src/Button.tsx",
      exports: ["Button", "ButtonProps"],
      dependencies: {
        react: "^18.0.0",
      },
    },
  },
  metadata: {
    description: "My component library",
    author: "Your Name",
  },
});
```

### Host Configuration

```typescript
export default defineHostConfig({
  warehouses: {
    ui: {
      url: "https://cdn.example.com/ui-warehouse",
      version: "^2.0.0",
      alias: "ui-components",
    },
  },
  cache: {
    strategy: "localStorage",
    ttl: 3600000, // 1 hour
  },
  loading: {
    timeout: 30000,
    retry: { attempts: 3, delay: 1000 },
  },
});
```

## 🎨 Examples & Quick Start

The fastest way to understand Expozr is to run the examples! We have working examples for different bundlers and frameworks.

### 📂 Examples Directory

**➡️ [View all examples](./examples/)**

| Example                                              | Description             | Stack                   | Demo                      |
| ---------------------------------------------------- | ----------------------- | ----------------------- | ------------------------- |
| [**Webpack + Vanilla**](./examples/webpack/vanilla/) | Basic module federation | Vanilla JS + TypeScript | [▶️ Try it](#quick-start) |
| [**Webpack + React**](./examples/webpack/react/)     | React component sharing | React + TypeScript      | [▶️ Try it](#quick-start) |

### ⚡ Quick Start (2 minutes)

Try the Vanilla JavaScript example:

```bash
# 1. Clone and setup
git clone https://github.com/brunos3d/expozr.git
cd expozr
npm install

# 2. Start the warehouse (port 3001)
cd examples/webpack/vanilla/remote
npm run dev

# 3. In a new terminal, start the host (port 3000)
cd examples/webpack/vanilla/host
npm run dev

# 4. Open http://localhost:3000 in your browser
```

**That's it!** You'll see the host loading and using utilities from the remote warehouse in real-time.

### 🎯 What You'll See

- ✅ **Automatic Config Discovery**: Zero configuration needed
- ✅ **Runtime Module Loading**: Modules loaded dynamically from remote
- ✅ **Type Safety**: Full TypeScript support
- ✅ **Hot Reloading**: Changes update instantly in development
- ✅ **Error Handling**: Clear error messages and troubleshooting

### 🚀 Try React Components

For React component federation:

```bash
# Start React warehouse
cd examples/webpack/react/remote && npm run dev

# Start React host (new terminal)
cd examples/webpack/react/host && npm run dev
```

See React components loaded dynamically between applications!

---

Check out the [examples](./examples) directory for complete working examples:

- **[Warehouse React](./examples/warehouse-react)** - React components warehouse
- **[Host Vanilla](./examples/host-vanilla)** - Vanilla JavaScript host
- **Host React** _(coming soon)_
- **Host Vue** _(coming soon)_

## 🌟 Why Expozr?

### vs Module Federation

- **Simpler**: No complex configuration or dependency management
- **Universal**: Works with any bundler, not just Webpack
- **Flexible**: Runtime discovery and loading
- **Type-Safe**: Full TypeScript support

### vs Micro-frontends

- **Lightweight**: No framework lock-in or routing complexity
- **Granular**: Share individual components, not entire applications
- **Efficient**: Smart caching and dependency resolution

### vs Package Registries

- **Dynamic**: Load modules at runtime, not build time
- **Versioned**: Multiple versions can coexist
- **Distributed**: No central registry required

## 🗺️ Roadmap

### Phase 1: Foundation ✅

- [x] Core library and types
- [x] Navigator runtime system
- [x] Webpack adapter
- [x] Basic CLI tools

### Phase 2: Expansion 🚧

- [ ] Vite adapter
- [ ] Rollup adapter
- [ ] Advanced CLI features
- [ ] React/Vue examples

### Phase 3: Production 📋

- [ ] Performance optimizations
- [ ] Security features
- [ ] Monitoring tools
- [ ] Registry service

### Phase 4: Ecosystem 🔮

- [ ] Plugin marketplace
- [ ] Community tools
- [ ] Enterprise features

## 🤝 Contributing

We welcome contributions! Please see our [Contributing Guide](./CONTRIBUTING.md) for details.

## 📄 License

MIT © [Bruno Silva](https://github.com/brunos3d)

---

<div align="center">
  <strong>🚀 Built with ❤️ for the developer community</strong>
</div>
